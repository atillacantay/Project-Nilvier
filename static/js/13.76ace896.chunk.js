(this["webpackJsonpproject-nilvier"]=this["webpackJsonpproject-nilvier"]||[]).push([[13],{286:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a(0),c=a.n(r),i=a(43),l=a(71),o=a(20),m=a(159),s=a(165),u=a(186),f=a(223),p=a(191),E=a(76),d=a(116),b=a(249),g=a.n(b),h=a(248),v=a.n(h),O=Object(m.a)((function(e){return Object(s.a)({gameCardRoot:{},gameCardDetails:{marginTop:e.spacing(1),display:"flex",justifyContent:"space-between"},margin:{marginLeft:e.spacing(1)}})})),j=function(e){var t=e.topGame,a=O(),i=Object(r.useState)(!1),l=Object(n.a)(i,2),m=l[0],s=l[1],b=function(){s((function(e){return!e}))},h=encodeURIComponent(t.game.name.trim());return c.a.createElement("div",{className:a.gameCardRoot},c.a.createElement(o.b,{to:"/twitch/streams/game/".concat(h)},c.a.createElement(u.a,{raised:m,onMouseEnter:b,onMouseLeave:b},c.a.createElement(f.a,null,c.a.createElement(p.a,{component:"img",alt:t.game.name,image:t.game.box.large,title:t.game.name})))),c.a.createElement("div",{className:a.gameCardDetails},c.a.createElement(E.a,{variant:"body2"},t.game.name),c.a.createElement("div",null,c.a.createElement(d.a,{display:"flex",title:"Live Streamers"},c.a.createElement(v.a,{color:"action",fontSize:"small"}),c.a.createElement(E.a,{variant:"body2",className:a.margin},t.channels)),c.a.createElement(d.a,{display:"flex",title:"Viewers"},c.a.createElement(g.a,{color:"action",fontSize:"small"}),c.a.createElement(E.a,{variant:"body2",className:a.margin},t.viewers)))))},w=a(185),x=a(244),y=Object(m.a)((function(e){return Object(s.a)({gamesRoot:{margin:e.spacing(2)},loader:{textAlign:"center"}})})),C=function(e){var t=e.topGames,a=e.isFetchingMore,n=y();return c.a.createElement("div",{className:n.gamesRoot},c.a.createElement(w.a,{container:!0,spacing:4},t.top.map((function(e){return c.a.createElement(w.a,{key:e.game._id,item:!0,xs:12,sm:6,md:4,lg:3,xl:2},c.a.createElement(j,{topGame:e}))})),a&&c.a.createElement(w.a,{item:!0,xs:12},c.a.createElement(d.a,{className:n.loader},c.a.createElement(x.a,null)))))},F=a(26),R=a.n(F),I=a(44),N=a(230),S=a(56),M=a(251),A=a(245),k=a(250),z=a.n(k),G=Object(m.a)((function(){return Object(s.a)({searchInput:{"& .MuiOutlinedInput-root .MuiOutlinedInput-notchedOutline":{borderColor:"#9146FF"},"& .MuiOutlinedInput-root.Mui-error .MuiOutlinedInput-notchedOutline":{borderColor:"red"}}})})),T=function(e){var t=e.onInputChange,a=e.textfieldRef,n=e.loading,r=G();return c.a.createElement(M.a,{name:"term",ref:a,autoComplete:"off",variant:"outlined",className:r.searchInput,placeholder:"Search users",InputProps:{startAdornment:c.a.createElement(A.a,{position:"start"},c.a.createElement(z.a,null)),endAdornment:c.a.createElement(A.a,{position:"end"},n&&c.a.createElement(x.a,{size:24,color:"inherit"}))},onChange:t})},H=a(203),L=a(188),D=a(115),_=a(277),J=a(246),W=a(279),B=a(207),P=a(247),U=a(280),V=a(92),q=a.n(V),K=Object(m.a)((function(e){return Object(s.a)({verifiedIcon:{marginLeft:e.spacing(1),color:"#9146FF"}})})),Q=function(e){var t=e.anchorEl,a=e.handleClose,n=e.channels,r=K(),i=Boolean(t),l=i?"channel-popper":void 0;return c.a.createElement(H.a,{onClickAway:a},c.a.createElement(L.a,{id:l,open:i,anchorEl:t,transition:!0},c.a.createElement(D.a,{elevation:4},c.a.createElement(_.a,{"aria-label":"channel"},n.map((function(e){return c.a.createElement(J.a,{key:e._id,button:!0,component:o.b,to:"/twitch/".concat(e.name)},c.a.createElement(W.a,null,c.a.createElement(B.a,{src:e.logo,alt:e.name})),c.a.createElement(P.a,{primary:e.name}),c.a.createElement(U.a,null,e.partner&&c.a.createElement(q.a,{className:r.verifiedIcon,fontSize:"small"})))}))))))},X=function(e,t){var a=Object(r.useState)(e),c=Object(n.a)(a,2),i=c[0],l=c[1];return Object(r.useEffect)((function(){var a=setTimeout((function(){l(e)}),t);return function(){clearTimeout(a)}}),[e]),i},Y=Object(m.a)((function(e){return Object(s.a)({twitchHeaderRoot:{},title:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:700,color:"#9146FF",margin:e.spacing(1,0)}})})),Z=function(){var e=Y(),t=Object(r.useRef)(null),a=Object(r.useState)([]),i=Object(n.a)(a,2),l=i[0],o=i[1],m=Object(r.useState)(""),s=Object(n.a)(m,2),u=s[0],f=s[1],p=Object(r.useState)(!1),b=Object(n.a)(p,2),g=b[0],h=b[1],v=Object(r.useState)(null),O=Object(n.a)(v,2),j=O[0],w=O[1],x=function(){var e=Object(I.a)(R.a.mark((function e(t){var a,n;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h(!0),e.prev=1,e.next=4,S.a.get("/api/twitch/search/channels",{params:{term:t}});case 4:a=e.sent,n=a.data,h(!1),o(n.channels),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),h(!1),o([]);case 14:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t){return e.apply(this,arguments)}}(),y=X(u,1e3);Object(r.useEffect)((function(){y?x(y):o([])}),[y]);Object(r.useEffect)((function(){l.length>0&&w(t.current)}),[l]);return c.a.createElement("div",{className:e.twitchHeaderRoot},c.a.createElement(d.a,{m:2,display:"flex",justifyContent:"space-between"},c.a.createElement(E.a,{variant:"h4",className:e.title},"Twitch Top Games"),c.a.createElement(T,{onInputChange:function(e){f(e.target.value)},textfieldRef:t,loading:g}),c.a.createElement(Q,{anchorEl:j,handleClose:function(){w(null)},channels:l})),c.a.createElement(N.a,null))},$=a(281),ee=function(e){var t=e.size,a=Array(t).fill(null).map((function(e,t){return t}));return c.a.createElement(w.a,{container:!0,spacing:4},a.map((function(e,t){return c.a.createElement(w.a,{key:t,item:!0,xs:12,sm:6,md:4,lg:3,xl:2},c.a.createElement($.a,{variant:"rect",height:411,animation:"wave"}),c.a.createElement(d.a,{pt:1,display:"flex",justifyContent:"space-between"},c.a.createElement($.a,{variant:"text",width:120,height:24,animation:"wave"}),c.a.createElement(d.a,null,c.a.createElement($.a,{variant:"text",width:70,animation:"wave"}),c.a.createElement($.a,{variant:"text",width:70,animation:"wave"}))))})))},te=a(205),ae=a(93),ne=Object(m.a)((function(e){return Object(s.a)({twitchRoot:{display:"flex",flexDirection:"column",height:"100%",overflow:"hidden auto"},errorAlert:{margin:e.spacing(2)},title:{fontFamily:'"Roboto", "Helvetica", "Arial", sans-serif',fontWeight:700,color:"#9146FF",margin:e.spacing(1,0)}})}));t.default=function(){var e=ne(),t=Object(ae.a)(),a=Object(n.a)(t,2),o=a[0],m=a[1],s=Object(r.useState)(0),u=Object(n.a)(s,2),f=u[0],p=u[1],E=Object(i.d)(),b=Object(i.e)((function(e){return e.twitch}),i.c),g=b.isFetching,h=b.isFetchingMore,v=b.topGames,O=b.error;return Object(r.useEffect)((function(){E(Object(l.d)())}),[E]),Object(r.useEffect)((function(){o&&p(f+10)}),[o,p]),Object(r.useEffect)((function(){f&&E(Object(l.a)(f))}),[f,E]),c.a.createElement("div",{className:e.twitchRoot,ref:m},c.a.createElement(Z,null),g?c.a.createElement(d.a,{m:2},c.a.createElement(ee,{size:10})):!O&&v._total>0?c.a.createElement(C,{topGames:v,isFetchingMore:h}):O&&c.a.createElement(te.a,{severity:"error",className:e.errorAlert},O))}}}]);
//# sourceMappingURL=13.76ace896.chunk.js.map